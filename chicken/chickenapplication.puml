@startuml

package domain {
    package klausur {
        enum Klausurart {
            ONLINE
            PRAESENZ
        }

        class VeranstaltungsId {
            @Rules
            String id
        }

        class Klausurtermin {
            String fach
            LocalDate datum
            LocalTime von
            LocalTime bis
            Klausurart klausurart
            VeranstaltungsId veranstaltungsId
            LocalTime berechneFreistellungsStartzeitpunkt()
            LocalTime berechneFreistellungsEndzeitpunkt()
        }
    }


    package student {
        class Urlaubstermin {
            LocalDate datum
            LocalTime von
            LocalTime bis
            boolean istVielfacheViertelstunde()
        }
        class Student {
            GithubHandle handle
            Set<KlausurReferenz> klausurtermine
            Set<Urlaubstermin> urlaubstermine
            double berechneResturlaub()
            void fuegeKlausurterminHinzu()
            void fuegeUrlaubsterminHinzu()
        }

        Student --> Urlaubstermin
    }
    student --> klausur

}

package service {
    package studentenservice {
        class StudentService {
            void berechneResturlaub()
            void klausurAnmelden()
            Set<Klausurtermin> klausurtermine()
            void klausurStornieren()
            void urlaubAnmelden()
            Set<Urlaubstermin> urlaubstermine()
            void urlaubStornieren()
        }
    }

    package klausurenservice {
        class KlausurenService {
            void klausurEintragen()
            Set<Klausurtermin> klausurtermine()
        }
        class KlausurenVerifizierer {
            LocalDateTime praktikumsStart
            LocalDateTime praktikumsEnde

            boolean istValide(Integer veranstaltungsId)

        }
    }
    package repositories {
        interface KlausurterminRepository {}
        interface StudentRepository {}
    }
    KlausurenService --> KlausurterminRepository
    StudentService --> StudentRepository
    StudentService --> KlausurterminRepository

}

package infrastructure {
    class ChickenApplication {}
    package web {
        class KlausurterminController {}
        class UrlaubsterminController {}
        class StartseitenController {}
    }
    package persistenz {

        package dao {
            interface KlausurterminDao extends CrudRepository {}
            interface StudentDao extends CrudRepository {}
        }
        class KlausurterminRepositoryImpl {
            KlausurterminDao klausurterminDao
        }
        class StudentRepositoryImpl {
            StudentDao studentDao
        }

        package dto {
          class KlausurterminDto {
            Long id
            String fach
            LocalDate datum
            LocalTime von
            LocalTime bis
            boolean klausurart
            String veranstaltungsId
          }
          class StudentDto {
            Long id
            String handle
            Set<KlausurReferenz> klausurtermine
            Set<Urlaubstermin> urlaubstermine
          }
        }



        StudentRepositoryImpl --> StudentDao
        KlausurterminRepositoryImpl --> KlausurterminDao
        StudentDao --> StudentDto
        KlausurterminDao --> KlausurterminDto
    }
}

service --> domain
infrastructure --> service
infrastructure --> domain

@enduml